//xml

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"

    android:id="@+id/main"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:gravity="center">

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/numerPytania"/>

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/trescPytania"
        android:text="Pytanie:"
        style="@style/quizPytanie"/>

    <RadioGroup
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/groupOdpowiedzi"
        style="@style/quizOdpowiedz">

        <RadioButton
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/odpowiedz1"/>

        <RadioButton
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/odpowiedz2"/>

        <RadioButton
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:id="@+id/odpowiedz3"/>

    </RadioGroup>

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/sprawdz"
        android:text="Sprawdź"
        style="@style/quizPrzycisk"/>

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/zagrajPonownie"
        android:text="Zagraj ponownie"
        android:visibility="gone"
        style="@style/quizPrzycisk"/>

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:id="@+id/wynik"
        style="@style/quizWynik"/>

</LinearLayout>


//main java

package com.example.gemindt;

import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.CheckBox;
import android.widget.EditText;
import android.widget.RadioButton;
import android.widget.RadioGroup;
import android.widget.Spinner;
import android.widget.TextView;
import android.widget.Toast;

import androidx.activity.EdgeToEdge;
import androidx.appcompat.app.AppCompatActivity;
import androidx.core.graphics.Insets;
import androidx.core.view.ViewCompat;
import androidx.core.view.WindowInsetsCompat;

import java.util.ArrayList;

public class MainActivity extends AppCompatActivity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        EdgeToEdge.enable(this);
        setContentView(R.layout.activity_main);
        ViewCompat.setOnApplyWindowInsetsListener(findViewById(R.id.main), (v, insets) -> {
            Insets systemBars = insets.getInsets(WindowInsetsCompat.Type.systemBars());
            v.setPadding(systemBars.left, systemBars.top, systemBars.right, systemBars.bottom);
            return insets;
        });

        numerPytania = findViewById(R.id.numerPytania);
        trescPytania = findViewById(R.id.trescPytania);
        groupOdpowiedzi = findViewById(R.id.groupOdpowiedzi);
        odpowiedz1 = findViewById(R.id.odpowiedz1);
        odpowiedz2 = findViewById(R.id.odpowiedz2);
        odpowiedz3 = findViewById(R.id.odpowiedz3);
        sprawdz = findViewById(R.id.sprawdz);
        wynikText = findViewById(R.id.wynik);
        zagrajPonownie = findViewById(R.id.zagrajPonownie);

        przygotujPytanie();
        wyswietlPytanie();

        sprawdz.setOnClickListener(v -> sprawdzOdpowiedz());
    }

    ArrayList<Pytanie> listaPytan = new ArrayList<>();
    int indeksPytania = 0;
    int wynik = 0;

    TextView numerPytania;
    TextView trescPytania;
    RadioGroup groupOdpowiedzi;
    RadioButton odpowiedz1, odpowiedz2, odpowiedz3;
    Button sprawdz, zagrajPonownie;
    TextView wynikText;

    // Pytania
    private void przygotujPytanie() {
        ArrayList<String> o1 = new ArrayList<>();
        o1.add("2");
        o1.add("4");
        o1.add("6");
        listaPytan.add(new Pytanie("Ile to jest 2 + 2?", o1, 1));

        ArrayList<String> o2 = new ArrayList<>();
        o2.add("Warszawa");
        o2.add("Berlin");
        o2.add("Madryt");
        listaPytan.add(new Pytanie("Stolicą Niemiec jest:", o2, 1));

        ArrayList<String> o3 = new ArrayList<>();
        o3.add("Ziemia");
        o3.add("Mars");
        o3.add("Jowisz");
        listaPytan.add(new Pytanie("Największa planeta Układu Słonecznego:", o3, 2));
    }

    // Wyświetlanie pytania
    private void wyswietlPytanie(){
        groupOdpowiedzi.clearCheck();

        Pytanie p = listaPytan.get(indeksPytania);

        numerPytania.setText("Pytanie " + (indeksPytania + 1) + "/" + listaPytan.size());
        trescPytania.setText(p.tresc);

        odpowiedz1.setText(p.odpowiedzi.get(0));
        odpowiedz2.setText(p.odpowiedzi.get(1));
        odpowiedz3.setText(p.odpowiedzi.get(2));

        // Zmiana tekstu przycisku na ostatnim pytaniu
        if (indeksPytania == listaPytan.size() - 1) {
            sprawdz.setText("Zakończ quiz");
        } else {
            sprawdz.setText("Następne pytanie");
        }
    }

    // Logika sprawdzania odpowiedzi
    private void sprawdzOdpowiedz() {
        zablokujOdpowiedzi(true);
        int zaznaczoneId = groupOdpowiedzi.getCheckedRadioButtonId();

        if(zaznaczoneId == -1){
            Toast.makeText(this, "Zaznacz odpowiedź!", Toast.LENGTH_SHORT).show();
            return;
        }

        int indexWybranej = groupOdpowiedzi.indexOfChild(findViewById(zaznaczoneId));
        int poprawna = listaPytan.get(indeksPytania).indeksPoprawnej;

        // ustawienie kolorów
        if(indexWybranej == poprawna){
            findViewById(zaznaczoneId).setBackgroundColor(getResources().getColor(android.R.color.holo_green_light));
            wynik++;
        } else {
            findViewById(zaznaczoneId).setBackgroundColor(getResources().getColor(android.R.color.holo_red_light));
            findViewById(groupOdpowiedzi.getChildAt(poprawna).getId())
                    .setBackgroundColor(getResources().getColor(android.R.color.holo_green_light));
        }

        // opóźnienie przed przejściem do następnego pytania
        new android.os.Handler().postDelayed(() -> {
            indeksPytania++;
            if(indeksPytania < listaPytan.size()){
                findViewById(zaznaczoneId).setBackgroundColor(getResources().getColor(android.R.color.transparent));
                findViewById(groupOdpowiedzi.getChildAt(poprawna).getId()).setBackgroundColor(getResources().getColor(android.R.color.transparent));
                zablokujOdpowiedzi(false);
                wyswietlPytanie();
            } else {
                wyswietlWynikKoncowy();
            }
        }, 1000); // 1 sekunda
    }

    // Ekran końcowy
    private void wyswietlWynikKoncowy(){
        groupOdpowiedzi.setVisibility(View.GONE);
        sprawdz.setVisibility(View.GONE);

        trescPytania.setText("Koniec quizu!\nTwój wynik: " + wynik + " / " + listaPytan.size());
        numerPytania.setText("");

        zagrajPonownie.setVisibility(View.VISIBLE);

        zagrajPonownie.setOnClickListener(v -> {
            int zaznaczoneId = groupOdpowiedzi.getCheckedRadioButtonId();
            wynik = 0;
            indeksPytania = 0;

            groupOdpowiedzi.setVisibility(View.VISIBLE);
            sprawdz.setVisibility(View.VISIBLE);
            zagrajPonownie.setVisibility(View.GONE);
            findViewById(zaznaczoneId).setBackgroundColor(getResources().getColor(android.R.color.transparent));
            for (int i = 0; i < groupOdpowiedzi.getChildCount(); i++) {
                groupOdpowiedzi.getChildAt(i).setEnabled(true);
            }
            wyswietlPytanie();
        });
    }

    private void zablokujOdpowiedzi(boolean czyZablokowac){
        for (int i = 0; i < groupOdpowiedzi.getChildCount(); i++) {
            groupOdpowiedzi.getChildAt(i).setEnabled(!czyZablokowac);
        }
    }
}


//pytanie java

package com.example.gemindt;

import java.util.ArrayList;

public class Pytanie {
    String tresc;
    ArrayList<String> odpowiedzi;
    int indeksPoprawnej; // dla pojedynczego wyboru
    boolean czyWielokrotnyWybor = false; // nowe pole
    ArrayList<Integer> poprawneOdp = new ArrayList<>(); // dla wielokrotnego wyboru

    // konstruktor dla pojedynczego wyboru
    public Pytanie(String tresc, ArrayList<String> odpowiedzi, int indeksPoprawnej) {
        this.tresc = tresc;
        this.odpowiedzi = odpowiedzi;
        this.indeksPoprawnej = indeksPoprawnej;
        this.czyWielokrotnyWybor = false;
        this.poprawneOdp.add(indeksPoprawnej);
    }

    // konstruktor dla wielokrotnego wyboru
    public Pytanie(String tresc, ArrayList<String> odpowiedzi, ArrayList<Integer> poprawneOdp) {
        this.tresc = tresc;
        this.odpowiedzi = odpowiedzi;
        this.czyWielokrotnyWybor = true;
        this.poprawneOdp = new ArrayList<>(poprawneOdp);
    }
}

//themes xml

    <style name="quizPytanie">
        <item name="android:textSize">20sp</item>
        <item name="android:textStyle">bold</item>
        <item name="android:padding">8dp</item>
    </style>

    <style name="quizOdpowiedz">
        <item name="android:textSize">18sp</item>
        <item name="android:padding">6dp</item>
    </style>

    <style name="quizPrzycisk">
        <item name="android:padding">10dp</item>
        <item name="android:textSize">16sp</item>
    </style>

    <style name="quizWynik">
        <item name="android:textSize">22sp</item>
        <item name="android:textStyle">bold</item>
        <item name="android:gravity">center</item>
    </style>
